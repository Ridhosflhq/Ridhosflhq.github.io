<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<div id="map" style="height: 600px;"></div>

var map = L.map('map').setView([-6.2, 106.8], 10); // Koordinat Jakarta

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors'
}).addTo(map);

var originMarker = L.marker([-6.21462, 106.84513]).addTo(map); // Monas
var destinationMarker = L.marker([-6.22972, 106.82940]).addTo(map); // Kota Tua

originMarker.dragging.enable();
destinationMarker.dragging.enable();

originMarker.on('dragend', function(event) {
    var newLatLng = event.target.getLatLng();
    // Panggil fungsi untuk memperbarui rute
    updateRoute(newLatLng.lat, newLatLng.lng, destinationMarker.getLatLng().lat, destinationMarker.getLatLng().lng);
});

destinationMarker.on('dragend', function(event) {
    var newLatLng = event.target.getLatLng();
    // Panggil fungsi untuk memperbarui rute
    updateRoute(originMarker.getLatLng().lat, originMarker.getLatLng().lng, newLatLng.lat, newLatLng.lng);
});

function updateRoute(originLat, originLng, destinationLat, destinationLng) {
    // Gunakan AJAX untuk mengirim permintaan ke HERE Routing API
    // ...
}

// ... (di dalam fungsi updateRoute)

// Contoh data rute dari HERE Routing API
var routeData = {
    // ...
};

// Decode polyline rute
var linestring = H.geo.LineString.fromFlexiblePolyline(routeData.response.route[0].shape);

// Tampilkan rute di peta
var polyline = L.polyline(linestring.getLatLngs(), { color: 'blue' }).addTo(map);
